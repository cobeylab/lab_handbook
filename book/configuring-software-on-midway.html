<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Cobey Lab Handbook</title>
  <meta name="description" content="Handbook for the Cobey Lab at the University of Chicago">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Cobey Lab Handbook" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Handbook for the Cobey Lab at the University of Chicago" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Cobey Lab Handbook" />
  
  <meta name="twitter:description" content="Handbook for the Cobey Lab at the University of Chicago" />
  



<meta name="date" content="2018-10-14">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="connecting-to-midway.html">
<link rel="next" href="running-jobs-on-midway.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />










<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="why.html"><a href="why.html"><i class="fa fa-check"></i><b>1</b> Why we work</a></li>
<li class="chapter" data-level="2" data-path="how-we-work.html"><a href="how-we-work.html"><i class="fa fa-check"></i><b>2</b> How we work</a><ul>
<li class="chapter" data-level="2.1" data-path="how-we-work.html"><a href="how-we-work.html#principles"><i class="fa fa-check"></i><b>2.1</b> Principles</a></li>
<li class="chapter" data-level="2.2" data-path="how-we-work.html"><a href="how-we-work.html#work-hours"><i class="fa fa-check"></i><b>2.2</b> Work hours</a></li>
<li class="chapter" data-level="2.3" data-path="how-we-work.html"><a href="how-we-work.html#workspace"><i class="fa fa-check"></i><b>2.3</b> Workspace</a></li>
<li class="chapter" data-level="2.4" data-path="how-we-work.html"><a href="how-we-work.html#communication"><i class="fa fa-check"></i><b>2.4</b> Communication</a></li>
<li class="chapter" data-level="2.5" data-path="how-we-work.html"><a href="how-we-work.html#weekly-check-ins"><i class="fa fa-check"></i><b>2.5</b> Weekly check-ins</a></li>
<li class="chapter" data-level="2.6" data-path="how-we-work.html"><a href="how-we-work.html#lab-meetings"><i class="fa fa-check"></i><b>2.6</b> Lab meetings</a></li>
<li class="chapter" data-level="2.7" data-path="how-we-work.html"><a href="how-we-work.html#reproducible-research"><i class="fa fa-check"></i><b>2.7</b> Reproducible research</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="performance.html"><a href="performance.html"><i class="fa fa-check"></i><b>3</b> Performance</a><ul>
<li class="chapter" data-level="3.1" data-path="performance.html"><a href="performance.html#reviews"><i class="fa fa-check"></i><b>3.1</b> Reviews</a></li>
<li class="chapter" data-level="3.2" data-path="performance.html"><a href="performance.html#my-commitments"><i class="fa fa-check"></i><b>3.2</b> My commitments</a></li>
<li class="chapter" data-level="3.3" data-path="performance.html"><a href="performance.html#basic-expectations"><i class="fa fa-check"></i><b>3.3</b> Basic expectations</a></li>
<li class="chapter" data-level="3.4" data-path="performance.html"><a href="performance.html#graduate-researchers"><i class="fa fa-check"></i><b>3.4</b> Graduate researchers</a></li>
<li class="chapter" data-level="3.5" data-path="performance.html"><a href="performance.html#postdoctoral-researchers"><i class="fa fa-check"></i><b>3.5</b> Postdoctoral researchers</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="so-you-wanna.html"><a href="so-you-wanna.html"><i class="fa fa-check"></i><b>4</b> So you wanna…</a><ul>
<li class="chapter" data-level="4.1" data-path="so-you-wanna.html"><a href="so-you-wanna.html#join-the-lab"><i class="fa fa-check"></i><b>4.1</b> Join the lab</a></li>
<li class="chapter" data-level="4.2" data-path="so-you-wanna.html"><a href="so-you-wanna.html#do-some-research"><i class="fa fa-check"></i><b>4.2</b> Do some research</a></li>
<li class="chapter" data-level="4.3" data-path="so-you-wanna.html"><a href="so-you-wanna.html#code-well-and-efficiently"><i class="fa fa-check"></i><b>4.3</b> Code well and efficiently</a></li>
<li class="chapter" data-level="4.4" data-path="so-you-wanna.html"><a href="so-you-wanna.html#write-well"><i class="fa fa-check"></i><b>4.4</b> Write well</a></li>
<li class="chapter" data-level="4.5" data-path="so-you-wanna.html"><a href="so-you-wanna.html#write-good-emails"><i class="fa fa-check"></i><b>4.5</b> Write good emails</a></li>
<li class="chapter" data-level="4.6" data-path="so-you-wanna.html"><a href="so-you-wanna.html#make-nice-figures"><i class="fa fa-check"></i><b>4.6</b> Make nice figures</a></li>
<li class="chapter" data-level="4.7" data-path="so-you-wanna.html"><a href="so-you-wanna.html#keep-up-with-the-literature"><i class="fa fa-check"></i><b>4.7</b> Keep up with the literature</a></li>
<li class="chapter" data-level="4.8" data-path="so-you-wanna.html"><a href="so-you-wanna.html#get-funded"><i class="fa fa-check"></i><b>4.8</b> Get funded</a></li>
<li class="chapter" data-level="4.9" data-path="so-you-wanna.html"><a href="so-you-wanna.html#do-peer-review"><i class="fa fa-check"></i><b>4.9</b> Do peer review</a></li>
<li class="chapter" data-level="4.10" data-path="so-you-wanna.html"><a href="so-you-wanna.html#have-productive-meetings"><i class="fa fa-check"></i><b>4.10</b> Have productive meetings</a></li>
<li class="chapter" data-level="4.11" data-path="so-you-wanna.html"><a href="so-you-wanna.html#book-travel"><i class="fa fa-check"></i><b>4.11</b> Book travel</a></li>
<li class="chapter" data-level="4.12" data-path="so-you-wanna.html"><a href="so-you-wanna.html#use-midway"><i class="fa fa-check"></i><b>4.12</b> Use Midway</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="about-midway.html"><a href="about-midway.html"><i class="fa fa-check"></i><b>5</b> About Midway</a></li>
<li class="chapter" data-level="6" data-path="storage-on-midway.html"><a href="storage-on-midway.html"><i class="fa fa-check"></i><b>6</b> Storage on Midway</a></li>
<li class="chapter" data-level="7" data-path="connecting-to-midway.html"><a href="connecting-to-midway.html"><i class="fa fa-check"></i><b>7</b> Connecting to Midway</a><ul>
<li class="chapter" data-level="7.1" data-path="connecting-to-midway.html"><a href="connecting-to-midway.html#ssh-terminal"><i class="fa fa-check"></i><b>7.1</b> SSH (terminal)</a></li>
<li class="chapter" data-level="7.2" data-path="connecting-to-midway.html"><a href="connecting-to-midway.html#scp"><i class="fa fa-check"></i><b>7.2</b> SCP</a></li>
<li class="chapter" data-level="7.3" data-path="connecting-to-midway.html"><a href="connecting-to-midway.html#smb-connect-as-a-disk"><i class="fa fa-check"></i><b>7.3</b> SMB (connect as a disk)</a></li>
<li class="chapter" data-level="7.4" data-path="connecting-to-midway.html"><a href="connecting-to-midway.html#ssh--x-terminal-with-graphical-forwarding"><i class="fa fa-check"></i><b>7.4</b> ssh -X (terminal with graphical forwarding)</a></li>
<li class="chapter" data-level="7.5" data-path="connecting-to-midway.html"><a href="connecting-to-midway.html#vnc-graphical-interface-via-thinlinc"><i class="fa fa-check"></i><b>7.5</b> VNC (graphical interface via ThinLinc)</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="configuring-software-on-midway.html"><a href="configuring-software-on-midway.html"><i class="fa fa-check"></i><b>8</b> Configuring Software on Midway</a><ul>
<li class="chapter" data-level="8.1" data-path="configuring-software-on-midway.html"><a href="configuring-software-on-midway.html#git"><i class="fa fa-check"></i><b>8.1</b> Git</a></li>
<li class="chapter" data-level="8.2" data-path="configuring-software-on-midway.html"><a href="configuring-software-on-midway.html#java"><i class="fa fa-check"></i><b>8.2</b> Java</a></li>
<li class="chapter" data-level="8.3" data-path="configuring-software-on-midway.html"><a href="configuring-software-on-midway.html#cc"><i class="fa fa-check"></i><b>8.3</b> C/C++</a></li>
<li class="chapter" data-level="8.4" data-path="configuring-software-on-midway.html"><a href="configuring-software-on-midway.html#r"><i class="fa fa-check"></i><b>8.4</b> R</a></li>
<li class="chapter" data-level="8.5" data-path="configuring-software-on-midway.html"><a href="configuring-software-on-midway.html#python"><i class="fa fa-check"></i><b>8.5</b> Python</a></li>
<li class="chapter" data-level="8.6" data-path="configuring-software-on-midway.html"><a href="configuring-software-on-midway.html#matlab-and-mathematica"><i class="fa fa-check"></i><b>8.6</b> Matlab and Mathematica</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="running-jobs-on-midway.html"><a href="running-jobs-on-midway.html"><i class="fa fa-check"></i><b>9</b> Running Jobs on Midway</a><ul>
<li class="chapter" data-level="9.1" data-path="running-jobs-on-midway.html"><a href="running-jobs-on-midway.html#overview"><i class="fa fa-check"></i><b>9.1</b> Overview</a></li>
<li class="chapter" data-level="9.2" data-path="running-jobs-on-midway.html"><a href="running-jobs-on-midway.html#job-structure"><i class="fa fa-check"></i><b>9.2</b> Job structure</a></li>
<li class="chapter" data-level="9.3" data-path="running-jobs-on-midway.html"><a href="running-jobs-on-midway.html#priority"><i class="fa fa-check"></i><b>9.3</b> Priority</a></li>
<li class="chapter" data-level="9.4" data-path="running-jobs-on-midway.html"><a href="running-jobs-on-midway.html#useful-commands"><i class="fa fa-check"></i><b>9.4</b> Useful commands</a><ul>
<li class="chapter" data-level="9.4.1" data-path="running-jobs-on-midway.html"><a href="running-jobs-on-midway.html#sinteractive"><i class="fa fa-check"></i><b>9.4.1</b> sinteractive</a></li>
<li class="chapter" data-level="9.4.2" data-path="running-jobs-on-midway.html"><a href="running-jobs-on-midway.html#sbatch"><i class="fa fa-check"></i><b>9.4.2</b> sbatch</a></li>
<li class="chapter" data-level="9.4.3" data-path="running-jobs-on-midway.html"><a href="running-jobs-on-midway.html#squeue"><i class="fa fa-check"></i><b>9.4.3</b> squeue</a></li>
<li class="chapter" data-level="9.4.4" data-path="running-jobs-on-midway.html"><a href="running-jobs-on-midway.html#scancel"><i class="fa fa-check"></i><b>9.4.4</b> scancel</a></li>
<li class="chapter" data-level="9.4.5" data-path="running-jobs-on-midway.html"><a href="running-jobs-on-midway.html#accounts"><i class="fa fa-check"></i><b>9.4.5</b> accounts</a></li>
<li class="chapter" data-level="9.4.6" data-path="running-jobs-on-midway.html"><a href="running-jobs-on-midway.html#sview"><i class="fa fa-check"></i><b>9.4.6</b> sview</a></li>
<li class="chapter" data-level="9.4.7" data-path="running-jobs-on-midway.html"><a href="running-jobs-on-midway.html#quota"><i class="fa fa-check"></i><b>9.4.7</b> quota</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="running-jobs-on-midway.html"><a href="running-jobs-on-midway.html#parameter-sweeps"><i class="fa fa-check"></i><b>9.5</b> Parameter sweeps</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="onboarding.html"><a href="onboarding.html"><i class="fa fa-check"></i><b>10</b> Onboarding</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Cobey Lab Handbook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="configuring-software-on-midway" class="section level1">
<h1><span class="header-section-number">Chapter 8</span> Configuring Software on Midway</h1>
<p>Before you run anything on Midway, you’ll need to load the necessary software modules using the <code>module</code> command:</p>
<p><a href="https://rcc.uchicago.edu/docs/tutorials/intro-to-software-modules/" class="uri">https://rcc.uchicago.edu/docs/tutorials/intro-to-software-modules/</a></p>
<p>If you’re not sure what the name of your module is, use, e.g.,</p>
<pre><code>$ module avail intel</code></pre>
<p>and you’ll be presented with a list of options. You can then load/unload modules using, e.g.,</p>
<pre><code>$ module load intel/15.0
$ module unload intel/15.0</code></pre>
<p>There are multiple versions of many modules, so you’ll generally want to check <code>module avail</code> before trying <code>module load</code>.</p>
<p>If you want to automatically load modules every time you log in, you can add <code>module load</code> commands to the end of your <code>~/.bash_profile</code> file (before <code># User specific environment and startup programs</code>).</p>
<div id="git" class="section level2">
<h2><span class="header-section-number">8.1</span> Git</h2>
<p>The easiest way to get your code onto Midway is to check it out</p>
<pre><code>$ module avail git</code></pre>
</div>
<div id="java" class="section level2">
<h2><span class="header-section-number">8.2</span> Java</h2>
<pre><code>$ module avail java</code></pre>
<p>As of writing, Midway only has one version of Java (1.7), so be sure not to use JDK 1.8 features in your Java code.</p>
</div>
<div id="cc" class="section level2">
<h2><span class="header-section-number">8.3</span> C/C++</h2>
<pre><code>$ module avail intel
$ module avail gcc</code></pre>
<p>There are three C/C++ compiler modules available on Midway: <code>gcc</code>, <code>intel</code>, and <code>pgi</code>. The Intel and PGI compilers are high-performance compilers that should produce faster machine code than GCC, but only <code>intel</code> seems to be kept up to date on Midway, so I’d recommend using that one.</p>
<p>The Intel compilers should work essentially the same as GCC, except due to ambiguities in the C++ language specification you may sometimes find that code that worked on GCC needs adjustment for Intel. To use the Intel compiler, just load the module and compile C code using <code>icc</code> and C++ code using <code>icpc</code>.</p>
<p>Unless you have a good reason not to, you should use <code>module avail</code> to make sure you’re using the latest GCC and Intel compilers, especially since adoption of the <a href="http://wikipedia.org/wiki/C++11">C++11 language standard</a> by compilers has been relatively recent at the time of writing.</p>
<p>Also, it’s worth knowing that Mac OS X, by default, uses a different compiler entirely: <a href="http://llvm.org">LLVM/Clang</a>. (Currently, only an old version of LLVM/Clang is available on Midway). So you might find yourself making sure your code can compile using three different implementations of C++, each with their own quirks.</p>
<p>Here’s how you compile C++11 code using the three compilers:</p>
<pre><code>$ g++ -std=c++11 -O3 my_program.cpp -o my_program
$ icpc -std=c++11 -O3 my_program.cpp -o my_program
$ clang++ -std=c++11 -stdlib=libc++ -O3 my_program.cpp -o my_program</code></pre>
<p>NOTE: the <code>-O3</code> flag means “optimization level 3”, which means, “make really fast code.” If you’re using a debugger, you’ll want to leave this flag off so the debugger can figure out where it is in your code. If you’re trying to generate results quickly, you’ll want to include this flag. (If you’re using Apple Xcode, having the flag off and on roughly correspond to “Debug” and “Release” configurations that you can choose in “Edit Scheme”.)</p>
<p>If you want to make it easy to compile your code with different compilers on different systems, you can use the <code>make.py</code> script in the <a href="https://bitbucket.org/cobeylab/bcellmodel">bcellmodel</a> project as a starting point. It tries Intel, then Clang, then GCC until one is available. (This kind of thing is possible, but a bit annoying to get working, using traditional Makefiles, so I’ve switched to using simple Python build scripts for simple code.)</p>
</div>
<div id="r" class="section level2">
<h2><span class="header-section-number">8.4</span> R</h2>
<pre><code>$ module avail R</code></pre>
<p>shows several versions of R. The best version will probably be the latest one alongside the Intel compiler, e.g., <code>R/3.1+intel-15.0</code> at the time of writing.</p>
</div>
<div id="python" class="section level2">
<h2><span class="header-section-number">8.5</span> Python</h2>
<p>In order to keep a consistent Python environment between your personal machine and Midway, we are maintaining our own Python installations in <code>/project/cobey</code>. Skip the Midway Python modules entirely, and instead include this in your <code>~/.bash_profile</code>:</p>
<pre><code>export PATH=/project/cobey/anaconda/bin:/project/cobey/pypy/bin:$PATH</code></pre>
<p>To make sure things are set up properly make sure that <code>which python</code> finds <code>/project/cobey/anaconda/bin/python</code> and <code>which pypy</code> finds <code>/project/cobey/pypy/bin/pypy</code>. See the Python page on this wiki for more information.</p>
</div>
<div id="matlab-and-mathematica" class="section level2">
<h2><span class="header-section-number">8.6</span> Matlab and Mathematica</h2>
<p>You shouldn’t use Matlab or Mathematica if possible, because if you publish your code your results will only be reproducible to people that want to pay for Matlab or Mathematica.</p>
<p>But if you must…</p>
<pre><code>module avail matlab
module avail mathematica</code></pre>
<p>shows that they are available on Midway. (Getting a graphical Mathematica notebook to run on the cluster is a pain in the ass, though, so you’re probably better off just running it locally if you can get away with it.)</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="connecting-to-midway.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="running-jobs-on-midway.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/04-so_you_wanna.Rmd",
"text": "Edit"
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
